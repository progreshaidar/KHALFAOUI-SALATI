<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تواقيت الصلاة - ورقلة</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@300;400;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            min-height: 100vh;
            color: #fff;
            position: relative;
            overflow-x: hidden;
            padding-bottom: 100px;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.03" d="M0,96L48,112C96,128,192,160,288,165.3C384,171,480,149,576,133.3C672,117,768,107,864,122.7C960,139,1056,181,1152,186.7C1248,192,1344,160,1392,144L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat;
            opacity: 0.5;
            pointer-events: none;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 30px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .logo {
            font-size: 2.5em;
            font-weight: 800;
            background: linear-gradient(135deg, #ff0400 0%, #ff7300 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            font-family: 'Amiri', serif;
        }

        .subtitle {
            font-size: 1.3em;
            color: #e0e0e0;
            font-weight: 300;
            margin-bottom: 5px;
        }

        .location {
            font-size: 1.1em;
            color: #b0b0b0;
            font-weight: 400;
        }

        .main-clock-section {
            background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.08));
            backdrop-filter: blur(25px);
            border: 2px solid rgba(255,255,255,0.25);
            border-radius: 40px;
            padding: 60px 40px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 25px 80px rgba(0,0,0,0.4);
        }

        .clock-display {
            font-size: 6em;
            font-weight: 800;
            color: #21ff08;
            text-shadow: 0 0 30px rgba(255,216,155,0.5), 0 5px 15px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            font-family: 'Cairo', sans-serif;
            letter-spacing: 5px;
        }

        .date-display {
            font-size: 1.8em;
            color: #e0e0e0;
            margin-bottom: 10px;
        }

        .hijri-date {
            font-size: 1.4em;
            color: #b0b0b0;
            font-family: 'Amiri', serif;
        }

        .next-prayer-info {
            background: linear-gradient(135deg, rgba(255,216,155,0.2), rgba(255,216,155,0.05));
            border: 2px solid rgba(255,216,155,0.3);
            border-radius: 20px;
            padding: 20px;
            margin-top: 30px;
            font-size: 1.3em;
        }

        .next-prayer-info .label {
            color: #ffd89b;
            font-weight: 600;
        }

        .nav-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-btn {
            background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255,255,255,0.2);
            padding: 15px 35px;
            border-radius: 20px;
            color: #fff;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-family: 'Cairo', sans-serif;
        }

        .nav-btn:hover {
            background: linear-gradient(135deg, rgba(255,216,155,0.3), rgba(255,216,155,0.1));
            border-color: rgba(255,216,155,0.5);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255,216,155,0.3);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #ffd89b, #c9a55d);
            border-color: #ffd89b;
            color: #1a3a4a;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .prayer-times-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .prayer-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.18), rgba(255,255,255,0.08));
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255,255,255,0.25);
            border-radius: 25px;
            padding: 35px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            position: relative;
        }

        .prayer-card.current-prayer {
            background: linear-gradient(135deg, rgba(255,216,155,0.3), rgba(255,216,155,0.1));
            border-color: #ffd89b;
            box-shadow: 0 25px 60px rgba(255,216,155,0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .prayer-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 60px rgba(255,216,155,0.2);
            border-color: rgba(255,216,155,0.4);
        }

        .prayer-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .prayer-name {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 15px;
            color: #ffd89b;
            font-family: 'Amiri', serif;
        }

        .prayer-time {
            font-size: 2.5em;
            font-weight: 800;
            color: #fff;
            margin-bottom: 10px;
        }

        .prayer-remaining {
            font-size: 1em;
            color: #b0b0b0;
            font-weight: 400;
        }

        .print-btn {
            background: linear-gradient(135deg, #ffd89b, #c9a55d);
            border: none;
            padding: 18px 45px;
            border-radius: 20px;
            color: #1a3a4a;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
            box-shadow: 0 10px 30px rgba(255,216,155,0.3);
            margin: 20px auto;
            display: block;
        }

        .print-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255,216,155,0.5);
        }

        .azkar-grid {
            display: grid;
            gap: 25px;
        }

        .azkar-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 25px;
            padding: 35px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .azkar-title {
            font-size: 1.8em;
            color: #ffd89b;
            font-weight: 700;
            margin-bottom: 20px;
            font-family: 'Amiri', serif;
            text-align: center;
        }

        .azkar-text {
            font-size: 1.4em;
            line-height: 2.2;
            color: #e0e0e0;
            font-family: 'Amiri', serif;
            text-align: center;
            margin-bottom: 15px;
        }

        .azkar-count {
            text-align: center;
            color: #b0b0b0;
            font-size: 1.1em;
        }

        .azkar-ticker {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, rgba(255,216,155,0.95), rgba(201,165,93,0.95));
            backdrop-filter: blur(20px);
            border-top: 3px solid #ffd89b;
            padding: 20px 0;
            overflow: hidden;
            z-index: 1000;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            height: 80px;
            position: relative;
        }

        .ticker-item {
            font-size: 1.4em;
            color: #1a3a4a;
            font-weight: 600;
            font-family: 'Amiri', serif;
            white-space: nowrap;
            text-align: center;
            padding: 0 50px;
            position: absolute;
            width: 100%;
            display: none;
        }

        .ticker-item.active {
            display: block;
            animation: fadeInOut 8s ease-in-out;
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            10% {
                opacity: 1;
                transform: translateY(0);
            }
            90% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-20px);
            }
        }

        .notification-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, rgba(255,216,155,0.98), rgba(201,165,93,0.98));
            backdrop-filter: blur(30px);
            border: 3px solid #ffd89b;
            border-radius: 30px;
            padding: 50px;
            text-align: center;
            box-shadow: 0 30px 100px rgba(0,0,0,0.5);
            z-index: 10000;
            transition: all 0.5s ease;
            max-width: 500px;
        }

        .notification-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .notification-popup .icon {
            font-size: 5em;
            margin-bottom: 20px;
        }

        .notification-popup .prayer-name {
            font-size: 3em;
            color: #1a3a4a;
            font-weight: 800;
            margin-bottom: 20px;
            font-family: 'Amiri', serif;
        }

        .notification-popup .message {
            font-size: 1.8em;
            color: #2a4a5a;
            font-weight: 600;
            margin-bottom: 30px;
        }

        .notification-popup .close-btn {
            background: #1a3a4a;
            color: #ffd89b;
            border: none;
            padding: 15px 40px;
            border-radius: 15px;
            font-size: 1.3em;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
        }

        @media print {
            body {
                background: white;
                color: black;
            }
            
            body::before {
                display: none;
            }
            
            .nav-tabs, .print-btn, .content-section:not(.active), .azkar-ticker {
                display: none !important;
            }
            
            .container {
                max-width: 100%;
            }
            
            .prayer-card {
                break-inside: avoid;
                border: 2px solid #333;
                background: #f9f9f9;
            }
            
            .clock-display, .date-display, .prayer-name, .prayer-time {
                color: #1a3a4a;
            }
        }

        @media (max-width: 768px) {
            .clock-display {
                font-size: 3.5em;
            }
            
            .prayer-times-grid {
                grid-template-columns: 1fr;
            }

            .ticker-item {
                font-size: 1.1em;
                padding: 0 30px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo"> الإقامة الجامعية الشهيد خلفاوي الحاج بورقلة</div>
            <div class="subtitle">مصلــى الإقامــة الجامعية الشيخ العربي التبسي 🕌</div>
            <div class="location"> مدينـــة ورقلـــة - الدولــة الجزائريـــة</div>
        </header>

        <div class="main-clock-section">
            <div class="clock-display" id="clock">00:00:00</div>
            <div class="date-display" id="gregorian-date"></div>
            <div class="hijri-date" id="hijri-date"></div>
            <div class="next-prayer-info" id="next-prayer-info">
                <span class="label">الصلاة القادمة:</span> <span id="next-prayer-name">-</span> 
                <span class="label">بعد:</span> <span id="time-remaining">-</span>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-btn active" onclick="showSection('times')">📅 مواقيت الصلاة</button>
            <button class="nav-btn" onclick="showSection('azkar')">📿 الأذكار</button>
        </div>

        <div id="times-section" class="content-section active">
            <button class="print-btn" onclick="window.print()">🖨️ طباعة التوقيت اليومي</button>
            <div class="prayer-times-grid" id="prayer-times"></div>
        </div>

        <div id="azkar-section" class="content-section">
            <div class="azkar-grid">
                <div class="azkar-card">
                    <div class="azkar-title">سيد الاستغفار</div>
                    <div class="azkar-text">
                        اللَّهُمَّ أَنْتَ رَبِّي لا إِلَهَ إِلا أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ، وَأَنَا عَلَى عَهْدِكَ وَوَعْدِكَ مَا اسْتَطَعْتُ، أَعُوذُ بِكَ مِنْ شَرِّ مَا صَنَعْتُ، أَبُوءُ لَكَ بِنِعْمَتِكَ عَلَيَّ، وَأَبُوءُ بِذَنْبِي فَاغْفِر لِي فَإِنَّهُ لا يَغْفِرُ الذُّنُوبَ إِلا أَنْتَ
                    </div>
                    <div class="azkar-count">مرة واحدة - صباحاً ومساءً</div>
                </div>

                <div class="azkar-card">
                    <div class="azkar-title">آية الكرسي</div>
                    <div class="azkar-text">
                        اللَّهُ لَا إِلَٰهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ ۚ لَا تَأْخُذُهُ سِنَةٌ وَلَا نَوْمٌ ۚ لَهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الْأَرْضِ ۗ مَنْ ذَا الَّذِي يَشْفَعُ عِنْدَهُ إِلَّا بِإِذْنِهِ ۚ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ ۖ وَلَا يُحِيطُونَ بِشَيْءٍ مِنْ عِلْمِهِ إِلَّا بِمَا شَاءَ ۚ وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالْأَرْضَ ۖ وَلَا يَئُودُهُ حِفْظُهُمَا ۚ وَهُوَ الْعَلِيُّ الْعَظِيمُ
                    </div>
                    <div class="azkar-count">مرة واحدة - بعد كل صلاة وقبل النوم</div>
                </div>

                <div class="azkar-card">
                    <div class="azkar-title">التسبيح</div>
                    <div class="azkar-text">
                        سُبْحَانَ اللَّهِ وَبِحَمْدِهِ
                    </div>
                    <div class="azkar-count">100 مرة يومياً</div>
                </div>

                <div class="azkar-card">
                    <div class="azkar-title">الاستغفار</div>
                    <div class="azkar-text">
                        أَسْتَغْفِرُ اللَّهَ وَأَتُوبُ إِلَيْهِ
                    </div>
                    <div class="azkar-count">100 مرة يومياً</div>
                </div>

                <div class="azkar-card">
                    <div class="azkar-title">الصلاة على النبي</div>
                    <div class="azkar-text">
                        اللَّهُمَّ صَلِّ وَسَلِّمْ وَبَارِكْ عَلَى سَيِّدِنَا مُحَمَّدٍ وَعَلَى آلِهِ وَصَحْبِهِ أَجْمَعِينَ
                    </div>
                    <div class="azkar-count">10 مرات صباحاً ومساءً</div>
                </div>

                <div class="azkar-card">
                    <div class="azkar-title">دعاء الصباح والمساء</div>
                    <div class="azkar-text">
                        اللَّهُمَّ إِنِّي أَصْبَحْتُ أُشْهِدُكَ وَأُشْهِدُ حَمَلَةَ عَرْشِكَ، وَمَلائِكَتَكَ وَجَمِيعَ خَلْقِكَ، أَنَّكَ أَنْتَ اللَّهُ لا إِلَهَ إِلا أَنْتَ وَحْدَكَ لا شَرِيكَ لَكَ، وَأَنَّ مُحَمَّداً عَبْدُكَ وَرَسُولُكَ
                    </div>
                    <div class="azkar-count">4 مرات صباحاً ومساءً</div>
                </div>
            </div>
        </div>
    </div>

    <!-- شريط الأذكار المتحرك -->
    <div class="azkar-ticker">
        <div class="ticker-item">سُبْحَانَ اللَّهِ وَبِحَمْدِهِ سُبْحَانَ اللَّهِ الْعَظِيمِ</div>
        <div class="ticker-item">لا إِلَهَ إِلا اللَّهُ وَحْدَهُ لا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ</div>
        <div class="ticker-item">اللَّهُمَّ صَلِّ وَسَلِّمْ وَبَارِكْ عَلَى سَيِّدِنَا مُحَمَّدٍ وَعَلَى آلِهِ وَصَحْبِهِ أَجْمَعِينَ</div>
        <div class="ticker-item">أَسْتَغْفِرُ اللَّهَ الْعَظِيمَ الَّذِي لا إِلَهَ إِلا هُوَ الْحَيُّ الْقَيُّومُ وَأَتُوبُ إِلَيْهِ</div>
        <div class="ticker-item">اللَّهُمَّ أَنْتَ رَبِّي لا إِلَهَ إِلا أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ</div>
        <div class="ticker-item">حَسْبِيَ اللَّهُ لا إِلَهَ إِلا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ</div>
        <div class="ticker-item">رَبِّ اغْفِرْ لِي وَلِوَالِدَيَّ وَلِلْمُؤْمِنِينَ يَوْمَ يَقُومُ الْحِسَابُ</div>
    </div>

    <div class="notification-popup" id="prayer-notification">
        <div class="icon">🕌</div>
        <div class="prayer-name" id="notification-prayer-name">الفجر</div>
        <div class="message">حان الآن موعد الصلاة</div>
        <button class="close-btn" onclick="closeNotification()">حسناً</button>
    </div>

    <script>
        // إحداثيات ورقلة
        const LATITUDE = 31.9495;
        const LONGITUDE = 5.3259;

        let prayerTimesToday = {};
        let notifiedPrayers = new Set();

        const prayerNames = {
            Fajr: 'الفجر',
            Sunrise: 'الشروق',
            Dhuhr: 'الظهر',
            Asr: 'العصر',
            Maghrib: 'المغرب',
            Isha: 'العشاء'
        };

        const prayerIcons = {
            Fajr: '🌅',
            Sunrise: '☀️',
            Dhuhr: '🌞',
            Asr: '🌤️',
            Maghrib: '🌆',
            Isha: '🌙'
        };

        // تحديث الساعة كل ثانية
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-DZ', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            document.getElementById('clock').textContent = timeString;
            
            checkPrayerTime(now);
        }

        // تحديث التاريخ الميلادي والهجري
        function updateDates() {
            const now = new Date();
            
            const gregorianDate = now.toLocaleDateString('ar-DZ', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('gregorian-date').textContent = gregorianDate;
            
            const hijriDate = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            }).format(now);
            document.getElementById('hijri-date').textContent = hijriDate;
        }

        // مواقيت الصلاة الدقيقة من timesprayer.com لورقلة
        // تحديث يومي حسب التاريخ
        const prayerTimesData = {
            '29-10-2025': { Fajr: '05:23', Sunrise: '06:53', Dhuhr: '12:22', Asr: '15:28', Maghrib: '17:51', Isha: '19:11' },
            '30-10-2025': { Fajr: '05:24', Sunrise: '06:54', Dhuhr: '12:22', Asr: '15:27', Maghrib: '17:51', Isha: '19:11' },
            '31-10-2025': { Fajr: '05:25', Sunrise: '06:55', Dhuhr: '12:22', Asr: '15:27', Maghrib: '17:50', Isha: '19:10' },
            '01-11-2025': { Fajr: '05:26', Sunrise: '06:55', Dhuhr: '12:22', Asr: '15:26', Maghrib: '17:49', Isha: '19:09' },
            '02-11-2025': { Fajr: '05:26', Sunrise: '06:56', Dhuhr: '12:22', Asr: '15:25', Maghrib: '17:48', Isha: '19:08' },
            '03-11-2025': { Fajr: '05:27', Sunrise: '06:57', Dhuhr: '12:22', Asr: '15:25', Maghrib: '17:47', Isha: '19:08' },
            '04-11-2025': { Fajr: '05:28', Sunrise: '06:58', Dhuhr: '12:22', Asr: '15:24', Maghrib: '17:46', Isha: '19:07' },
            '05-11-2025': { Fajr: '05:28', Sunrise: '06:59', Dhuhr: '12:22', Asr: '15:24', Maghrib: '17:45', Isha: '19:06' },
            '06-11-2025': { Fajr: '05:29', Sunrise: '07:00', Dhuhr: '12:22', Asr: '15:23', Maghrib: '17:45', Isha: '19:06' },
            '07-11-2025': { Fajr: '05:30', Sunrise: '07:00', Dhuhr: '12:22', Asr: '15:22', Maghrib: '17:44', Isha: '19:05' },
            '08-11-2025': { Fajr: '05:31', Sunrise: '07:01', Dhuhr: '12:22', Asr: '15:22', Maghrib: '17:43', Isha: '19:04' },
            '09-11-2025': { Fajr: '05:31', Sunrise: '07:02', Dhuhr: '12:23', Asr: '15:21', Maghrib: '17:43', Isha: '19:04' },
            '10-11-2025': { Fajr: '05:32', Sunrise: '07:03', Dhuhr: '12:23', Asr: '15:21', Maghrib: '17:42', Isha: '19:03' },
            '11-11-2025': { Fajr: '05:33', Sunrise: '07:04', Dhuhr: '12:23', Asr: '15:20', Maghrib: '17:41', Isha: '19:03' },
            '12-11-2025': { Fajr: '05:34', Sunrise: '07:05', Dhuhr: '12:23', Asr: '15:20', Maghrib: '17:41', Isha: '19:02' },
            '13-11-2025': { Fajr: '05:34', Sunrise: '07:06', Dhuhr: '12:23', Asr: '15:19', Maghrib: '17:40', Isha: '19:02' },
            '14-11-2025': { Fajr: '05:35', Sunrise: '07:06', Dhuhr: '12:23', Asr: '15:19', Maghrib: '17:39', Isha: '19:01' },
            '15-11-2025': { Fajr: '05:36', Sunrise: '07:07', Dhuhr: '12:23', Asr: '15:19', Maghrib: '17:39', Isha: '19:01' },
            '16-11-2025': { Fajr: '05:37', Sunrise: '07:08', Dhuhr: '12:23', Asr: '15:18', Maghrib: '17:38', Isha: '19:01' },
            '17-11-2025': { Fajr: '05:37', Sunrise: '07:09', Dhuhr: '12:24', Asr: '15:18', Maghrib: '17:38', Isha: '19:00' },
            '18-11-2025': { Fajr: '05:38', Sunrise: '07:10', Dhuhr: '12:24', Asr: '15:17', Maghrib: '17:37', Isha: '19:00' },
            '19-11-2025': { Fajr: '05:39', Sunrise: '07:11', Dhuhr: '12:24', Asr: '15:17', Maghrib: '17:37', Isha: '19:00' },
            '20-11-2025': { Fajr: '05:39', Sunrise: '07:12', Dhuhr: '12:24', Asr: '15:17', Maghrib: '17:37', Isha: '18:59' },
            '21-11-2025': { Fajr: '05:40', Sunrise: '07:13', Dhuhr: '12:25', Asr: '15:17', Maghrib: '17:36', Isha: '18:59' },
            '22-11-2025': { Fajr: '05:41', Sunrise: '07:14', Dhuhr: '12:25', Asr: '15:16', Maghrib: '17:36', Isha: '18:59' },
            '23-11-2025': { Fajr: '05:42', Sunrise: '07:14', Dhuhr: '12:25', Asr: '15:16', Maghrib: '17:36', Isha: '18:59' },
            '24-11-2025': { Fajr: '05:42', Sunrise: '07:15', Dhuhr: '12:25', Asr: '15:16', Maghrib: '17:35', Isha: '18:58' },
            '25-11-2025': { Fajr: '05:43', Sunrise: '07:16', Dhuhr: '12:26', Asr: '15:16', Maghrib: '17:35', Isha: '18:58' },
            '26-11-2025': { Fajr: '05:44', Sunrise: '07:17', Dhuhr: '12:26', Asr: '15:16', Maghrib: '17:35', Isha: '18:58' },
            '27-11-2025': { Fajr: '05:45', Sunrise: '07:18', Dhuhr: '12:26', Asr: '15:16', Maghrib: '17:35', Isha: '18:58' },
            '28-11-2025': { Fajr: '05:45', Sunrise: '07:19', Dhuhr: '12:27', Asr: '15:15', Maghrib: '17:34', Isha: '18:58' },
            '29-11-2025': { Fajr: '05:46', Sunrise: '07:20', Dhuhr: '12:27', Asr: '15:15', Maghrib: '17:34', Isha: '18:58' },
            '30-11-2025': { Fajr: '05:47', Sunrise: '07:20', Dhuhr: '12:27', Asr: '15:15', Maghrib: '17:34', Isha: '18:58' },
            '01-12-2025': { Fajr: '05:48', Sunrise: '07:21', Dhuhr: '12:28', Asr: '15:15', Maghrib: '17:34', Isha: '18:58' },
            '02-12-2025': { Fajr: '05:48', Sunrise: '07:22', Dhuhr: '12:28', Asr: '15:15', Maghrib: '17:34', Isha: '18:58' },
            '03-12-2025': { Fajr: '05:49', Sunrise: '07:23', Dhuhr: '12:29', Asr: '15:15', Maghrib: '17:34', Isha: '18:58' },
            '04-12-2025': { Fajr: '05:50', Sunrise: '07:24', Dhuhr: '12:29', Asr: '15:15', Maghrib: '17:34', Isha: '18:58' },
            '05-12-2025': { Fajr: '05:50', Sunrise: '07:24', Dhuhr: '12:29', Asr: '15:16', Maghrib: '17:34', Isha: '18:58' },
            '06-12-2025': { Fajr: '05:51', Sunrise: '07:25', Dhuhr: '12:30', Asr: '15:16', Maghrib: '17:34', Isha: '18:59' },
            '07-12-2025': { Fajr: '05:52', Sunrise: '07:26', Dhuhr: '12:30', Asr: '15:16', Maghrib: '17:34', Isha: '18:59' },
            '08-12-2025': { Fajr: '05:53', Sunrise: '07:27', Dhuhr: '12:31', Asr: '15:16', Maghrib: '17:34', Isha: '18:59' },
            '09-12-2025': { Fajr: '05:53', Sunrise: '07:28', Dhuhr: '12:31', Asr: '15:16', Maghrib: '17:35', Isha: '18:59' },
            '10-12-2025': { Fajr: '05:54', Sunrise: '07:28', Dhuhr: '12:32', Asr: '15:16', Maghrib: '17:35', Isha: '18:59' },
            '11-12-2025': { Fajr: '05:54', Sunrise: '07:29', Dhuhr: '12:32', Asr: '15:17', Maghrib: '17:35', Isha: '19:00' },
            '12-12-2025': { Fajr: '05:55', Sunrise: '07:30', Dhuhr: '12:32', Asr: '15:17', Maghrib: '17:35', Isha: '19:00' },
            '13-12-2025': { Fajr: '05:56', Sunrise: '07:30', Dhuhr: '12:33', Asr: '15:17', Maghrib: '17:35', Isha: '19:00' },
            '14-12-2025': { Fajr: '05:56', Sunrise: '07:31', Dhuhr: '12:33', Asr: '15:18', Maghrib: '17:36', Isha: '19:01' },
            '15-12-2025': { Fajr: '05:57', Sunrise: '07:32', Dhuhr: '12:34', Asr: '15:18', Maghrib: '17:36', Isha: '19:01' },
            '16-12-2025': { Fajr: '05:58', Sunrise: '07:32', Dhuhr: '12:34', Asr: '15:18', Maghrib: '17:36', Isha: '19:01' },
            '17-12-2025': { Fajr: '05:58', Sunrise: '07:33', Dhuhr: '12:35', Asr: '15:19', Maghrib: '17:37', Isha: '19:02' },
            '18-12-2025': { Fajr: '05:59', Sunrise: '07:33', Dhuhr: '12:35', Asr: '15:19', Maghrib: '17:37', Isha: '19:02' },
            '19-12-2025': { Fajr: '05:59', Sunrise: '07:34', Dhuhr: '12:36', Asr: '15:19', Maghrib: '17:38', Isha: '19:03' },
            '20-12-2025': { Fajr: '06:00', Sunrise: '07:35', Dhuhr: '12:36', Asr: '15:20', Maghrib: '17:38', Isha: '19:03' },
            '21-12-2025': { Fajr: '06:00', Sunrise: '07:35', Dhuhr: '12:37', Asr: '15:20', Maghrib: '17:39', Isha: '19:04' },
            '22-12-2025': { Fajr: '06:01', Sunrise: '07:36', Dhuhr: '12:37', Asr: '15:21', Maghrib: '17:39', Isha: '19:04' },
            '23-12-2025': { Fajr: '06:01', Sunrise: '07:36', Dhuhr: '12:38', Asr: '15:21', Maghrib: '17:40', Isha: '19:05' },
            '24-12-2025': { Fajr: '06:02', Sunrise: '07:36', Dhuhr: '12:38', Asr: '15:22', Maghrib: '17:40', Isha: '19:05' },
            '25-12-2025': { Fajr: '06:02', Sunrise: '07:37', Dhuhr: '12:39', Asr: '15:23', Maghrib: '17:41', Isha: '19:06' },
            '26-12-2025': { Fajr: '06:03', Sunrise: '07:37', Dhuhr: '12:39', Asr: '15:23', Maghrib: '17:41', Isha: '19:06' },
            '27-12-2025': { Fajr: '06:03', Sunrise: '07:38', Dhuhr: '12:40', Asr: '15:24', Maghrib: '17:42', Isha: '19:07' }
        };

        // جلب مواقيت الصلاة من البيانات المحفوظة
        function fetchPrayerTimes() {
            const now = new Date();
            const dateKey = `${String(now.getDate()).padStart(2, '0')}-${String(now.getMonth() + 1).padStart(2, '0')}-${now.getFullYear()}`;
            
            const todayTimes = prayerTimesData[dateKey];
            
            if (todayTimes) {
                prayerTimesToday = {
                    Fajr: parseTimeString(todayTimes.Fajr),
                    Sunrise: parseTimeString(todayTimes.Sunrise),
                    Dhuhr: parseTimeString(todayTimes.Dhuhr),
                    Asr: parseTimeString(todayTimes.Asr),
                    Maghrib: parseTimeString(todayTimes.Maghrib),
                    Isha: parseTimeString(todayTimes.Isha)
                };
            } else {
                // إذا لم يكن التاريخ متوفراً، استخدم أقرب تاريخ
                const fallbackDate = '29-10-2025';
                const fallbackTimes = prayerTimesData[fallbackDate];
                prayerTimesToday = {
                    Fajr: parseTimeString(fallbackTimes.Fajr),
                    Sunrise: parseTimeString(fallbackTimes.Sunrise),
                    Dhuhr: parseTimeString(fallbackTimes.Dhuhr),
                    Asr: parseTimeString(fallbackTimes.Asr),
                    Maghrib: parseTimeString(fallbackTimes.Maghrib),
                    Isha: parseTimeString(fallbackTimes.Isha)
                };
            }
            
            displayPrayerTimes();
            return true;
        }

        // تحويل النص إلى كائن Date
        function parseTimeString(timeStr) {
            const [hours, minutes] = timeStr.split(':');
            const date = new Date();
            date.setHours(parseInt(hours), parseInt(minutes), 0, 0);
            return date;
        }

        // عرض مواقيت الصلاة
        function displayPrayerTimes() {
            const now = new Date();
            const container = document.getElementById('prayer-times');
            container.innerHTML = '';
            
            const prayerOrder = ['Fajr', 'Sunrise', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];
            const currentPrayer = getCurrentPrayer(now);
            
            prayerOrder.forEach(prayer => {
                const time = prayerTimesToday[prayer];
                if (!time) return;
                
                const card = document.createElement('div');
                card.className = 'prayer-card';
                
                if (prayer === currentPrayer) {
                    card.classList.add('current-prayer');
                }
                
                const timeString = time.toLocaleTimeString('ar-DZ', {
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: false
                });
                
                const remaining = getTimeRemaining(now, time);
                
                card.innerHTML = `
                    <div class="prayer-icon">${prayerIcons[prayer]}</div>
                    <div class="prayer-name">${prayerNames[prayer]}</div>
                    <div class="prayer-time">${timeString}</div>
                    <div class="prayer-remaining">${remaining}</div>
                `;
                
                container.appendChild(card);
            });
            
            updateNextPrayerInfo(now);
        }

        // الحصول على الصلاة الحالية
        function getCurrentPrayer(now) {
            const prayerOrder = ['Fajr', 'Sunrise', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];
            
            for (let i = 0; i < prayerOrder.length; i++) {
                const prayer = prayerOrder[i];
                const prayerTime = prayerTimesToday[prayer];
                
                if (prayerTime && now < prayerTime) {
                    return prayer;
                }
            }
            
            return 'Fajr';
        }

        // حساب الوقت المتبقي
        function getTimeRemaining(now, targetTime) {
            let diff = targetTime - now;
            
            if (diff < 0) {
                diff += 24 * 60 * 60 * 1000;
            }
            
            const hours = Math.floor(diff / (60 * 60 * 1000));
            const minutes = Math.floor((diff % (60 * 60 * 1000)) / (60 * 1000));
            
            if (hours > 0) {
                return `بعد ${hours} ساعة و ${minutes} دقيقة`;
            } else if (minutes > 0) {
                return `بعد ${minutes} دقيقة`;
            } else {
                return 'الآن';
            }
        }

        // تحديث معلومات الصلاة القادمة
        function updateNextPrayerInfo(now) {
            const nextPrayer = getCurrentPrayer(now);
            let nextTime = prayerTimesToday[nextPrayer];
            
            if (!nextTime) return;
            
            if (nextTime < now) {
                const tomorrow = new Date(now);
                tomorrow.setDate(tomorrow.getDate() + 1);
                nextTime = new Date(tomorrow);
                nextTime.setHours(prayerTimesToday[nextPrayer].getHours());
                nextTime.setMinutes(prayerTimesToday[nextPrayer].getMinutes());
            }
            
            document.getElementById('next-prayer-name').textContent = prayerNames[nextPrayer];
            document.getElementById('time-remaining').textContent = getTimeRemaining(now, nextTime);
        }

        // فحص إذا حان وقت الصلاة
        function checkPrayerTime(now) {
            const prayerOrder = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];
            
            prayerOrder.forEach(prayer => {
                const prayerTime = prayerTimesToday[prayer];
                if (!prayerTime) return;
                
                const timeDiff = Math.abs(now - prayerTime);
                
                if (timeDiff < 60000 && !notifiedPrayers.has(prayer)) {
                    showPrayerNotification(prayer);
                    notifiedPrayers.add(prayer);
                }
            });
            
            if (now.getHours() === 0 && now.getMinutes() === 0) {
                notifiedPrayers.clear();
                fetchPrayerTimes();
            }
        }

        // عرض إعلان الصلاة
        function showPrayerNotification(prayer) {
            const notification = document.getElementById('prayer-notification');
            document.getElementById('notification-prayer-name').textContent = prayerNames[prayer];
            notification.classList.add('show');
            
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('حان وقت الصلاة', {
                    body: `حان الآن موعد صلاة ${prayerNames[prayer]}`,
                    icon: '🕌',
                    tag: 'prayer-time'
                });
            }
        }

        // إغلاق الإعلان
        function closeNotification() {
            document.getElementById('prayer-notification').classList.remove('show');
        }

        // التبديل بين الأقسام
        function showSection(section) {
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(s => s.classList.remove('active'));
            
            document.getElementById(`${section}-section`).classList.add('active');
            
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // طلب إذن الإشعارات
        function requestNotificationPermission() {
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
        }

        // تهيئة التطبيق
        function init() {
            updateClock();
            updateDates();
            fetchPrayerTimes();
            requestNotificationPermission();
            startAzkarTicker();
            
            setInterval(updateClock, 1000);
            
            setInterval(() => {
                const now = new Date();
                updateNextPrayerInfo(now);
                
                if (now.getMinutes() === 0) {
                    displayPrayerTimes();
                }
            }, 60000);
            
            setInterval(() => {
                const now = new Date();
                if (now.getHours() === 0 && now.getMinutes() === 0) {
                    updateDates();
                    fetchPrayerTimes();
                }
            }, 60000);
        }

        // تشغيل شريط الأذكار
        function startAzkarTicker() {
            const tickerItems = document.querySelectorAll('.ticker-item');
            let currentIndex = 0;
            
            function showNextZikr() {
                tickerItems.forEach(item => {
                    item.classList.remove('active');
                });
                
                tickerItems[currentIndex].classList.add('active');
                
                currentIndex = (currentIndex + 1) % tickerItems.length;
            }
            
            showNextZikr();
            setInterval(showNextZikr, 8000);
        }

        window.onload = init;
    </script>
</body>
</html>